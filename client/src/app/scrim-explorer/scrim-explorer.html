<main class="grid grid-cols-[300px_3fr] p-6">
    <div class="flex flex-col rounded-box items-center max-w-xs scrim-selector">
        <ul class="list w-full">
            @for(scrim of scrimsViews; track scrim.displayDate) {
            <li class=" btn list-row grid-cols-1" (click)="selectScrim(scrim)"
                [ngClass]="{'btn-active': selectedScrim?.dateIso === scrim.dateIso}">
                <div class="w-full flex flex-col gap-2">
                    <div class="flex justify-between items-center">
                        <h3 class="card-title">{{ scrim.displayDate }}</h3>
                        <div class="flex gap-2 items-center">
                            @if(scrim.isOfficial) {
                            <div class="badge badge-warning">LBLCS</div>
                            }
                            <div class="badge badge-soft flex" [ngClass]="getSuccessClass(scrim)">{{ scrim.score }}
                            </div>
                        </div>
                    </div>


                    <div class="text-sm">
                        <span [ngClass]="{'badge badge-outline p-2 font-semibold': didTeamWon(scrim, 0) }">{{
                            scrim.teams?.a?.name }}</span>
                        @if (scrim.teams?.b) {
                        vs <span [ngClass]="{'badge badge-outline p-2 font-semibold': didTeamWon(scrim, 1) }">{{
                            scrim.teams?.b?.name }}</span>
                        }
                    </div>
                </div>
            </li>
            }
        </ul>
    </div>
    <section class="col-start-2">
        @if (!selectedScrim) {
        <div class="flex flex-col items-center justify-center h-full opacity-50">
            <p class="text-lg">Select a scrim to view details</p>
            <span class="text-6xl mt-4">ðŸ‘ˆ</span>
        </div>
        } @else {
        <div class="card w-full bg-base-300 card-lg shadow-sm card-border">
            <div class="card-body">
                <div class="">
                    <div class="flex justify-between items-center">
                        <h2 class="card-title">{{ selectedScrim.displayDate }}</h2>
                        <div class="flex gap-2 items-center">
                            @if(selectedScrim.isOfficial) {
                            <div class="badge badge-warning">Official</div>
                            }
                            <div class="badge badge-soft flex" [ngClass]="getSuccessClass(selectedScrim)">{{
                                selectedScrim.score }}</div>
                        </div>
                    </div>
                    <div class="text-sm">{{ selectedScrim.teams?.a?.name }}
                        @if (selectedScrim.teams?.b) {
                        vs <span class="badge badge-outline p-2 font-semibold">{{ selectedScrim.teams?.b?.name }}</span>
                        }
                    </div>
                </div>
                <div class="select-match flex gap-2 flex-wrap justify-center font-semibold">
                    @for(match of scrimMatchsRecaps[selectedScrim.dateIso]; track match) {
                    <button class="btn btn-secondary btn-soft py-1" (click)="selectMatch(match.id)"
                        [ngClass]="{'btn-active': selectedMatchId === match.id}">Game
                        {{
                        match.id.split('-')[3] }}</button>
                    }
                </div>
                <section class="matchRecap">
                    <div class="match-recap">
                        <app-match-recap></app-match-recap>
                    </div>

                </section>
            </div>
        </div>
        }
    </section>
</main>